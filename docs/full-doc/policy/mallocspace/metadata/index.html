<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `metadata` mod in crate `mmtk`."><meta name="keywords" content="rust, rustlang, rust-lang, metadata"><title>mmtk::policy::mallocspace::metadata - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../storage.js"></script><script src="../../../../crates.js"></script><script defer src="../../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module metadata</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="metadata" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../mmtk/index.html"><img class="rust-logo" src="../../../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../../index.html">mmtk</a>::<wbr><a href="../../index.html">policy</a>::<wbr><a href="../index.html">mallocspace</a>::<wbr><a class="mod" href="#">metadata</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../../src/mmtk/policy/mallocspace/metadata.rs.html#1-279" title="goto source code">[src]</a></span></h1><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CHUNK_MAP_LOCK.html" title="mmtk::policy::mallocspace::metadata::CHUNK_MAP_LOCK struct">CHUNK_MAP_LOCK</a></div><div class="item-right docblock-short"><p>Lock to synchronize the mapping of side metadata for a newly allocated chunk by malloc</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CHUNK_METADATA.html" title="mmtk::policy::mallocspace::metadata::CHUNK_METADATA struct">CHUNK_METADATA</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MAX_METADATA_ADDRESS.html" title="mmtk::policy::mallocspace::metadata::MAX_METADATA_ADDRESS struct">MAX_METADATA_ADDRESS</a></div><div class="item-right docblock-short"><p>Maximum metadata address for the ACTIVE_CHUNK_METADATA_SPEC which is used to check bounds</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ACTIVE_CHUNK_METADATA_SPEC.html" title="mmtk::policy::mallocspace::metadata::ACTIVE_CHUNK_METADATA_SPEC constant">ACTIVE_CHUNK_METADATA_SPEC</a></div><div class="item-right docblock-short"><p>Metadata spec for the active chunk byte</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ACTIVE_PAGE_METADATA_SPEC.html" title="mmtk::policy::mallocspace::metadata::ACTIVE_PAGE_METADATA_SPEC constant">ACTIVE_PAGE_METADATA_SPEC</a></div><div class="item-right docblock-short"><p>Metadata spec for the active page byte</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.OFFSET_MALLOC_METADATA_SPEC.html" title="mmtk::policy::mallocspace::metadata::OFFSET_MALLOC_METADATA_SPEC constant">OFFSET_MALLOC_METADATA_SPEC</a></div><div class="item-right docblock-short"></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.compare_exchange_set_page_mark.html" title="mmtk::policy::mallocspace::metadata::compare_exchange_set_page_mark fn">compare_exchange_set_page_mark</a></div><div class="item-right docblock-short"><p>Set the page mark from 0 to 1. Return true if we set it successfully in this call.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.has_object_alloced_by_malloc.html" title="mmtk::policy::mallocspace::metadata::has_object_alloced_by_malloc fn">has_object_alloced_by_malloc</a></div><div class="item-right docblock-short"><p>Check if there is an object allocated by malloc at the address.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_alloced_by_malloc.html" title="mmtk::policy::mallocspace::metadata::is_alloced_by_malloc fn">is_alloced_by_malloc</a></div><div class="item-right docblock-short"><p>Check if a given object was allocated by malloc</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_mapped.html" title="mmtk::policy::mallocspace::metadata::is_chunk_mapped fn">is_chunk_mapped</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_marked.html" title="mmtk::policy::mallocspace::metadata::is_chunk_marked fn">is_chunk_marked</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_marked_unsafe.html" title="mmtk::policy::mallocspace::metadata::is_chunk_marked_unsafe fn">is_chunk_marked_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_marked.html" title="mmtk::policy::mallocspace::metadata::is_marked fn">is_marked</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_marked_unsafe.html" title="mmtk::policy::mallocspace::metadata::is_marked_unsafe fn">is_marked_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_meta_space_mapped.html" title="mmtk::policy::mallocspace::metadata::is_meta_space_mapped fn">is_meta_space_mapped</a></div><div class="item-right docblock-short"><p>Check if metadata is mapped for a range [addr, addr + size). Metadata is mapped per chunk,
we will go through all the chunks for [address, address + size), and check if they are mapped.
If any of the chunks is not mapped, return false. Otherwise return true.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_meta_space_mapped_for_address.html" title="mmtk::policy::mallocspace::metadata::is_meta_space_mapped_for_address fn">is_meta_space_mapped_for_address</a></div><div class="item-right docblock-short"><p>Check if metadata is mapped for a given address. We check if the active chunk metadata is mapped,
and if the active chunk bit is marked as well. If the chunk is mapped and marked, we consider the
metadata for the chunk is properly mapped.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_offset_malloc.html" title="mmtk::policy::mallocspace::metadata::is_offset_malloc fn">is_offset_malloc</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_page_marked.html" title="mmtk::policy::mallocspace::metadata::is_page_marked fn">is_page_marked</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_page_marked_unsafe.html" title="mmtk::policy::mallocspace::metadata::is_page_marked_unsafe fn">is_page_marked_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.load128.html" title="mmtk::policy::mallocspace::metadata::load128 fn">load128</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"><p>Load u128 bits of side metadata</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.map_active_chunk_metadata.html" title="mmtk::policy::mallocspace::metadata::map_active_chunk_metadata fn">map_active_chunk_metadata</a></div><div class="item-right docblock-short"><p>Eagerly map the active chunk metadata surrounding <code>chunk_start</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.map_meta_space.html" title="mmtk::policy::mallocspace::metadata::map_meta_space fn">map_meta_space</a></div><div class="item-right docblock-short"><p>We map the active chunk metadata (if not previously mapped), as well as the alloc bit metadata
and active page metadata here. Note that if [addr, addr + size) crosses multiple chunks, we
will map for each chunk.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_alloc_bit.html" title="mmtk::policy::mallocspace::metadata::set_alloc_bit fn">set_alloc_bit</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_chunk_mark.html" title="mmtk::policy::mallocspace::metadata::set_chunk_mark fn">set_chunk_mark</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_mark_bit.html" title="mmtk::policy::mallocspace::metadata::set_mark_bit fn">set_mark_bit</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_offset_malloc_bit.html" title="mmtk::policy::mallocspace::metadata::set_offset_malloc_bit fn">set_offset_malloc_bit</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_page_mark.html" title="mmtk::policy::mallocspace::metadata::set_page_mark fn">set_page_mark</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_alloc_bit.html" title="mmtk::policy::mallocspace::metadata::unset_alloc_bit fn">unset_alloc_bit</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_alloc_bit_unsafe.html" title="mmtk::policy::mallocspace::metadata::unset_alloc_bit_unsafe fn">unset_alloc_bit_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_chunk_mark_unsafe.html" title="mmtk::policy::mallocspace::metadata::unset_chunk_mark_unsafe fn">unset_chunk_mark_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_mark_bit.html" title="mmtk::policy::mallocspace::metadata::unset_mark_bit fn">unset_mark_bit</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_offset_malloc_bit_unsafe.html" title="mmtk::policy::mallocspace::metadata::unset_offset_malloc_bit_unsafe fn">unset_offset_malloc_bit_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_page_mark_unsafe.html" title="mmtk::policy::mallocspace::metadata::unset_page_mark_unsafe fn">unset_page_mark_unsafe</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>