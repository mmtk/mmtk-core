<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An abstract trait for work packets that process object graph edges.  Its method `ProcessEdgesWork::trace_object` traces an object and, upon first visit, enqueues it into an internal queue inside the `ProcessEdgesWork` instance.  Each implementation of this trait implement `trace_object` differently.  During `Plan::schedule_collection`, plans select (usually via `GCWorkContext`) specialized implementations of this trait to be used during each trace according the nature of each trace, such as whether it is a nursery collection, whether it is a defrag collection, whether it pins objects, etc."><title>ProcessEdgesWork in mmtk::scheduler - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mmtk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../mmtk/index.html">mmtk</a><span class="version">0.29.0-5bc6ce561a5c6e0e186fb7254f6b4a0c28be7dae</span></h2></div><h2 class="location"><a href="#">ProcessEdgesWork</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.ScanObjectsWorkType">ScanObjectsWorkType</a></li><li><a href="#associatedtype.VM">VM</a></li></ul><h3><a href="#provided-associated-consts">Provided Associated Constants</a></h3><ul class="block"><li><a href="#associatedconstant.CAPACITY">CAPACITY</a></li><li><a href="#associatedconstant.OVERWRITE_REFERENCE">OVERWRITE_REFERENCE</a></li><li><a href="#associatedconstant.SCAN_OBJECTS_IMMEDIATELY">SCAN_OBJECTS_IMMEDIATELY</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.create_scan_work">create_scan_work</a></li><li><a href="#tymethod.new">new</a></li><li><a href="#tymethod.trace_object">trace_object</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.cache_roots_for_sanity_gc">cache_roots_for_sanity_gc</a></li><li><a href="#method.flush">flush</a></li><li><a href="#method.process_slot">process_slot</a></li><li><a href="#method.process_slots">process_slots</a></li><li><a href="#method.start_or_dispatch_scan_work">start_or_dispatch_scan_work</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In mmtk::scheduler</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../mmtk/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">mmtk</a>::<wbr><a href="index.html">scheduler</a>::<wbr><a class="trait" href="#">ProcessEdgesWork</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/mmtk/scheduler/gc_work.rs.html#544-649">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait ProcessEdgesWork: <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static + <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/ops/deref/trait.DerefMut.html" title="trait core::ops::deref::DerefMut">DerefMut</a> + <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = <a class="struct" href="gc_work/struct.ProcessEdgesBase.html" title="struct mmtk::scheduler::gc_work::ProcessEdgesBase">ProcessEdgesBase</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;&gt; {
    type <a href="#associatedtype.VM" class="associatedtype">VM</a>: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>;
    type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a>: <a class="trait" href="gc_work/trait.ScanObjectsWork.html" title="trait mmtk::scheduler::gc_work::ScanObjectsWork">ScanObjectsWork</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;;

    const <a href="#associatedconstant.CAPACITY" class="constant">CAPACITY</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.usize.html">usize</a> = 4_096usize;
    const <a href="#associatedconstant.OVERWRITE_REFERENCE" class="constant">OVERWRITE_REFERENCE</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a> = true;
    const <a href="#associatedconstant.SCAN_OBJECTS_IMMEDIATELY" class="constant">SCAN_OBJECTS_IMMEDIATELY</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a> = true;

    // Required methods
    fn <a href="#tymethod.new" class="fn">new</a>(
        slots: <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&lt;&lt;Self as <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a>&gt;::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a> as <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt;::<a class="associatedtype" href="../vm/trait.VMBinding.html#associatedtype.VMSlot" title="type mmtk::vm::VMBinding::VMSlot">VMSlot</a>&gt;,
        roots: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a>,
        mmtk: &amp;'static <a class="struct" href="../mmtk/struct.MMTK.html" title="struct mmtk::mmtk::MMTK">MMTK</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;,
        bucket: <a class="enum" href="work_bucket/enum.WorkBucketStage.html" title="enum mmtk::scheduler::work_bucket::WorkBucketStage">WorkBucketStage</a>
    ) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.trace_object" class="fn">trace_object</a>(&amp;mut self, object: <a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.create_scan_work" class="fn">create_scan_work</a>(
        &amp;self,
        nodes: <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>&gt;
    ) -&gt; Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.ScanObjectsWorkType" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::ScanObjectsWorkType">ScanObjectsWorkType</a>;

    // Provided methods
    fn <a href="#method.cache_roots_for_sanity_gc" class="fn">cache_roots_for_sanity_gc</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.start_or_dispatch_scan_work" class="fn">start_or_dispatch_scan_work</a>(
        &amp;mut self,
        work_packet: impl <a class="trait" href="work/trait.GCWork.html" title="trait mmtk::scheduler::work::GCWork">GCWork</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;
    ) { ... }
<span class="item-spacer"></span>    fn <a href="#method.flush" class="fn">flush</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.process_slot" class="fn">process_slot</a>(
        &amp;mut self,
        slot: &lt;&lt;Self as <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a>&gt;::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a> as <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt;::<a class="associatedtype" href="../vm/trait.VMBinding.html#associatedtype.VMSlot" title="type mmtk::vm::VMBinding::VMSlot">VMSlot</a>
    ) { ... }
<span class="item-spacer"></span>    fn <a href="#method.process_slots" class="fn">process_slots</a>(&amp;mut self) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An abstract trait for work packets that process object graph edges.  Its method
<a href="gc_work/trait.ProcessEdgesWork.html#tymethod.trace_object" title="method mmtk::scheduler::gc_work::ProcessEdgesWork::trace_object"><code>ProcessEdgesWork::trace_object</code></a> traces an object and, upon first visit, enqueues it into an
internal queue inside the <code>ProcessEdgesWork</code> instance.  Each implementation of this trait
implement <code>trace_object</code> differently.  During <a href="../plan/global/trait.Plan.html#tymethod.schedule_collection" title="method mmtk::plan::global::Plan::schedule_collection"><code>Plan::schedule_collection</code></a>, plans select
(usually via <code>GCWorkContext</code>) specialized implementations of this trait to be used during each
trace according the nature of each trace, such as whether it is a nursery collection, whether it
is a defrag collection, whether it pins objects, etc.</p>
<p>This trait was originally designed for work packets that process object graph edges represented
as slots.  The constructor <a href="gc_work/trait.ProcessEdgesWork.html#tymethod.new" title="associated function mmtk::scheduler::gc_work::ProcessEdgesWork::new"><code>ProcessEdgesWork::new</code></a> takes a vector of slots, and the created
work packet will trace the objects pointed by the object reference in each slot using the
<code>trace_object</code> method, and update the slot if the GC moves the target object when tracing.</p>
<p>This trait can also be used merely as a provider of the <code>trace_object</code> method by giving it an
empty vector of slots.  This is useful for node-enqueuing tracing
(<a href="../vm/scanning/trait.Scanning.html#method.scan_object_and_trace_edges" title="associated function mmtk::vm::scanning::Scanning::scan_object_and_trace_edges"><code>Scanning::scan_object_and_trace_edges</code></a>) as well as weak reference processing
(<a href="../vm/scanning/trait.Scanning.html#method.process_weak_refs" title="associated function mmtk::vm::scanning::Scanning::process_weak_refs"><code>Scanning::process_weak_refs</code></a> as well as <code>ReferenceProcessor</code> and <code>FinalizableProcessor</code>).
In those cases, the caller passes the reference to the target object to <code>trace_object</code>, an the
caller is responsible for updating the slots according the return value of <code>trace_object</code>.</p>
<p>TODO: We should refactor this trait to decouple it from slots. See:
<a href="https://github.com/mmtk/mmtk-core/issues/599">https://github.com/mmtk/mmtk-core/issues/599</a></p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.VM" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#548">source</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a>: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a></h4></section></summary><div class="docblock"><p>The associate type for the VM.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.ScanObjectsWorkType" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#551">source</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a>: <a class="trait" href="gc_work/trait.ScanObjectsWork.html" title="trait mmtk::scheduler::gc_work::ScanObjectsWork">ScanObjectsWork</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;</h4></section></summary><div class="docblock"><p>The work packet type for scanning objects when using this ProcessEdgesWork.</p>
</div></details></div><h2 id="provided-associated-consts" class="section-header">Provided Associated Constants<a href="#provided-associated-consts" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedconstant.CAPACITY" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#559">source</a><h4 class="code-header">const <a href="#associatedconstant.CAPACITY" class="constant">CAPACITY</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.usize.html">usize</a> = 4_096usize</h4></section></summary><div class="docblock"><p>The maximum number of slots that should be put to one of this work packets.
The caller who creates a work packet of this trait should be responsible to
comply with this capacity.
Higher capacity means the packet will take longer to finish, and may lead to
bad load balancing. On the other hand, lower capacity would lead to higher cost
on scheduling many small work packets. It is important to find a proper capacity.</p>
</div></details><details class="toggle" open><summary><section id="associatedconstant.OVERWRITE_REFERENCE" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#561">source</a><h4 class="code-header">const <a href="#associatedconstant.OVERWRITE_REFERENCE" class="constant">OVERWRITE_REFERENCE</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a> = true</h4></section></summary><div class="docblock"><p>Do we update object reference? This has to be true for a moving GC.</p>
</div></details><details class="toggle" open><summary><section id="associatedconstant.SCAN_OBJECTS_IMMEDIATELY" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#564">source</a><h4 class="code-header">const <a href="#associatedconstant.SCAN_OBJECTS_IMMEDIATELY" class="constant">SCAN_OBJECTS_IMMEDIATELY</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a> = true</h4></section></summary><div class="docblock"><p>If true, we do object scanning in this work packet with the same worker without scheduling overhead.
If false, we will add object scanning work packets to the global queue and allow other workers to work on it.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.new" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#573-578">source</a><h4 class="code-header">fn <a href="#tymethod.new" class="fn">new</a>(
    slots: <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&lt;&lt;Self as <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a>&gt;::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a> as <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt;::<a class="associatedtype" href="../vm/trait.VMBinding.html#associatedtype.VMSlot" title="type mmtk::vm::VMBinding::VMSlot">VMSlot</a>&gt;,
    roots: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a>,
    mmtk: &amp;'static <a class="struct" href="../mmtk/struct.MMTK.html" title="struct mmtk::mmtk::MMTK">MMTK</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;,
    bucket: <a class="enum" href="work_bucket/enum.WorkBucketStage.html" title="enum mmtk::scheduler::work_bucket::WorkBucketStage">WorkBucketStage</a>
) -&gt; Self</h4></section></summary><div class="docblock"><p>Create a <a href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork"><code>ProcessEdgesWork</code></a>.</p>
<p>Arguments:</p>
<ul>
<li><code>slots</code>: a vector of slots.</li>
<li><code>roots</code>: are the objects root reachable objects?</li>
<li><code>mmtk</code>: a reference to the MMTK instance.</li>
<li><code>bucket</code>: which work bucket this packet belongs to. Further work generated from this packet will also be put to the same bucket.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.trace_object" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#584">source</a><h4 class="code-header">fn <a href="#tymethod.trace_object" class="fn">trace_object</a>(&amp;mut self, object: <a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a></h4></section></summary><div class="docblock"><p>Trace an MMTk object. The implementation should forward this call to the policy-specific
<code>trace_object()</code> methods, depending on which space this object is in.
If the object is not in any MMTk space, the implementation should forward the call to
<code>ActivePlan::vm_trace_object()</code> to let the binding handle the tracing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.create_scan_work" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#618">source</a><h4 class="code-header">fn <a href="#tymethod.create_scan_work" class="fn">create_scan_work</a>(
    &amp;self,
    nodes: <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>&gt;
) -&gt; Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.ScanObjectsWorkType" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::ScanObjectsWorkType">ScanObjectsWorkType</a></h4></section></summary><div class="docblock"><p>Create an object-scanning work packet to be used for this ProcessEdgesWork.</p>
<p><code>roots</code> indicates if we are creating a packet for root scanning.  It is only true when this
method is called to handle <code>RootsWorkFactory::create_process_pinning_roots_work</code>.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.cache_roots_for_sanity_gc" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#589-596">source</a><h4 class="code-header">fn <a href="#method.cache_roots_for_sanity_gc" class="fn">cache_roots_for_sanity_gc</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>If the work includes roots, we will store the roots somewhere so for sanity GC, we can do another
transitive closure from the roots.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.start_or_dispatch_scan_work" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#600-612">source</a><h4 class="code-header">fn <a href="#method.start_or_dispatch_scan_work" class="fn">start_or_dispatch_scan_work</a>(&amp;mut self, work_packet: impl <a class="trait" href="work/trait.GCWork.html" title="trait mmtk::scheduler::work::GCWork">GCWork</a>&lt;Self::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a>&gt;)</h4></section></summary><div class="docblock"><p>Start the a scan work packet. If SCAN_OBJECTS_IMMEDIATELY, the work packet will be executed immediately, in this method.
Otherwise, the work packet will be added the Closure work bucket and will be dispatched later by the scheduler.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.flush" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#622-627">source</a><h4 class="code-header">fn <a href="#method.flush" class="fn">flush</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Flush the nodes in ProcessEdgesBase, and create a ScanObjects work packet for it. If the node set is empty,
this method will simply return with no work packet created.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.process_slot" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#631-640">source</a><h4 class="code-header">fn <a href="#method.process_slot" class="fn">process_slot</a>(
    &amp;mut self,
    slot: &lt;&lt;Self as <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a>&gt;::<a class="associatedtype" href="gc_work/trait.ProcessEdgesWork.html#associatedtype.VM" title="type mmtk::scheduler::gc_work::ProcessEdgesWork::VM">VM</a> as <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt;::<a class="associatedtype" href="../vm/trait.VMBinding.html#associatedtype.VMSlot" title="type mmtk::vm::VMBinding::VMSlot">VMSlot</a>
)</h4></section></summary><div class="docblock"><p>Process a slot, including loading the object reference from the memory slot,
trace the object and store back the new object reference if necessary.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.process_slots" class="method"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#643-648">source</a><h4 class="code-header">fn <a href="#method.process_slots" class="fn">process_slots</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Process all the slots in the work packet.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.77.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-ProcessEdgesWork-for-SanityGCProcessEdges%3CVM%3E" class="impl"><a class="src rightside" href="../../src/mmtk/util/sanity/sanity_checker.rs.html#174-230">source</a><a href="#impl-ProcessEdgesWork-for-SanityGCProcessEdges%3CVM%3E" class="anchor">§</a><h3 class="code-header">impl&lt;VM: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt; <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a> for <a class="struct" href="../util/sanity/sanity_checker/struct.SanityGCProcessEdges.html" title="struct mmtk::util::sanity::sanity_checker::SanityGCProcessEdges">SanityGCProcessEdges</a>&lt;VM&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VM-1" class="associatedtype trait-impl"><a href="#associatedtype.VM-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a> = VM</h4></section><section id="associatedtype.ScanObjectsWorkType-1" class="associatedtype trait-impl"><a href="#associatedtype.ScanObjectsWorkType-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a> = <a class="struct" href="gc_work/struct.ScanObjects.html" title="struct mmtk::scheduler::gc_work::ScanObjects">ScanObjects</a>&lt;<a class="struct" href="../util/sanity/sanity_checker/struct.SanityGCProcessEdges.html" title="struct mmtk::util::sanity::sanity_checker::SanityGCProcessEdges">SanityGCProcessEdges</a>&lt;VM&gt;&gt;</h4></section><section id="associatedconstant.OVERWRITE_REFERENCE-1" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/mmtk/util/sanity/sanity_checker.rs.html#178">source</a><a href="#associatedconstant.OVERWRITE_REFERENCE-1" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.OVERWRITE_REFERENCE" class="constant">OVERWRITE_REFERENCE</a>: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.bool.html">bool</a> = false</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ProcessEdgesWork-for-SFTProcessEdges%3CVM%3E" class="impl"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#679-707">source</a><a href="#impl-ProcessEdgesWork-for-SFTProcessEdges%3CVM%3E" class="anchor">§</a><h3 class="code-header">impl&lt;VM: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt; <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a> for <a class="struct" href="gc_work/struct.SFTProcessEdges.html" title="struct mmtk::scheduler::gc_work::SFTProcessEdges">SFTProcessEdges</a>&lt;VM&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VM-2" class="associatedtype trait-impl"><a href="#associatedtype.VM-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a> = VM</h4></section><section id="associatedtype.ScanObjectsWorkType-2" class="associatedtype trait-impl"><a href="#associatedtype.ScanObjectsWorkType-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a> = <a class="struct" href="gc_work/struct.ScanObjects.html" title="struct mmtk::scheduler::gc_work::ScanObjects">ScanObjects</a>&lt;<a class="struct" href="gc_work/struct.SFTProcessEdges.html" title="struct mmtk::scheduler::gc_work::SFTProcessEdges">SFTProcessEdges</a>&lt;VM&gt;&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ProcessEdgesWork-for-UnsupportedProcessEdges%3CVM%3E" class="impl"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#1170-1191">source</a><a href="#impl-ProcessEdgesWork-for-UnsupportedProcessEdges%3CVM%3E" class="anchor">§</a><h3 class="code-header">impl&lt;VM: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt; <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a> for <a class="struct" href="gc_work/struct.UnsupportedProcessEdges.html" title="struct mmtk::scheduler::gc_work::UnsupportedProcessEdges">UnsupportedProcessEdges</a>&lt;VM&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VM-3" class="associatedtype trait-impl"><a href="#associatedtype.VM-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a> = VM</h4></section><section id="associatedtype.ScanObjectsWorkType-3" class="associatedtype trait-impl"><a href="#associatedtype.ScanObjectsWorkType-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a> = <a class="struct" href="gc_work/struct.ScanObjects.html" title="struct mmtk::scheduler::gc_work::ScanObjects">ScanObjects</a>&lt;<a class="struct" href="gc_work/struct.UnsupportedProcessEdges.html" title="struct mmtk::scheduler::gc_work::UnsupportedProcessEdges">UnsupportedProcessEdges</a>&lt;VM&gt;&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ProcessEdgesWork-for-GenNurseryProcessEdges%3CVM,+P,+KIND%3E" class="impl"><a class="src rightside" href="../../src/mmtk/plan/generational/gc_work.rs.html#28-72">source</a><a href="#impl-ProcessEdgesWork-for-GenNurseryProcessEdges%3CVM,+P,+KIND%3E" class="anchor">§</a><h3 class="code-header">impl&lt;VM: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>, P: <a class="trait" href="../plan/generational/global/trait.GenerationalPlanExt.html" title="trait mmtk::plan::generational::global::GenerationalPlanExt">GenerationalPlanExt</a>&lt;VM&gt; + <a class="trait" href="../plan/global/trait.PlanTraceObject.html" title="trait mmtk::plan::global::PlanTraceObject">PlanTraceObject</a>&lt;VM&gt;, const KIND: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.u8.html">u8</a>&gt; <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a> for <a class="struct" href="../plan/generational/gc_work/struct.GenNurseryProcessEdges.html" title="struct mmtk::plan::generational::gc_work::GenNurseryProcessEdges">GenNurseryProcessEdges</a>&lt;VM, P, KIND&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VM-4" class="associatedtype trait-impl"><a href="#associatedtype.VM-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a> = VM</h4></section><section id="associatedtype.ScanObjectsWorkType-4" class="associatedtype trait-impl"><a href="#associatedtype.ScanObjectsWorkType-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a> = <a class="struct" href="gc_work/struct.PlanScanObjects.html" title="struct mmtk::scheduler::gc_work::PlanScanObjects">PlanScanObjects</a>&lt;<a class="struct" href="../plan/generational/gc_work/struct.GenNurseryProcessEdges.html" title="struct mmtk::plan::generational::gc_work::GenNurseryProcessEdges">GenNurseryProcessEdges</a>&lt;VM, P, KIND&gt;, P&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ProcessEdgesWork-for-PlanProcessEdges%3CVM,+P,+KIND%3E" class="impl"><a class="src rightside" href="../../src/mmtk/scheduler/gc_work.rs.html#947-985">source</a><a href="#impl-ProcessEdgesWork-for-PlanProcessEdges%3CVM,+P,+KIND%3E" class="anchor">§</a><h3 class="code-header">impl&lt;VM: <a class="trait" href="../vm/trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>, P: <a class="trait" href="../plan/global/trait.PlanTraceObject.html" title="trait mmtk::plan::global::PlanTraceObject">PlanTraceObject</a>&lt;VM&gt; + <a class="trait" href="../plan/global/trait.Plan.html" title="trait mmtk::plan::global::Plan">Plan</a>&lt;VM = VM&gt;, const KIND: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/std/primitive.u8.html">u8</a>&gt; <a class="trait" href="gc_work/trait.ProcessEdgesWork.html" title="trait mmtk::scheduler::gc_work::ProcessEdgesWork">ProcessEdgesWork</a> for <a class="struct" href="gc_work/struct.PlanProcessEdges.html" title="struct mmtk::scheduler::gc_work::PlanProcessEdges">PlanProcessEdges</a>&lt;VM, P, KIND&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.VM-5" class="associatedtype trait-impl"><a href="#associatedtype.VM-5" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VM" class="associatedtype">VM</a> = VM</h4></section><section id="associatedtype.ScanObjectsWorkType-5" class="associatedtype trait-impl"><a href="#associatedtype.ScanObjectsWorkType-5" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ScanObjectsWorkType" class="associatedtype">ScanObjectsWorkType</a> = <a class="struct" href="gc_work/struct.PlanScanObjects.html" title="struct mmtk::scheduler::gc_work::PlanScanObjects">PlanScanObjects</a>&lt;<a class="struct" href="gc_work/struct.PlanProcessEdges.html" title="struct mmtk::scheduler::gc_work::PlanProcessEdges">PlanProcessEdges</a>&lt;VM, P, KIND&gt;, P&gt;</h4></section></div></details></div><script src="../../trait.impl/mmtk/scheduler/gc_work/trait.ProcessEdgesWork.js" async></script></section></div></main></body></html>