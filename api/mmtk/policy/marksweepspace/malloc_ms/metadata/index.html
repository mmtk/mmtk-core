<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `metadata` mod in crate `mmtk`."><title>mmtk::policy::marksweepspace::malloc_ms::metadata - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="mmtk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../mmtk/index.html">mmtk</a><span class="version">0.27.0-c320cf38b3cf7a14f8543600dfd81f9e03676298</span></h2></div><h2 class="location"><a href="#">Module metadata</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In mmtk::policy::marksweepspace::malloc_ms</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../../../mmtk/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" tabindex="-1"><a href="../../../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">policy</a>::<wbr><a href="../../index.html">marksweepspace</a>::<wbr><a href="../index.html">malloc_ms</a>::<wbr><a class="mod" href="#">metadata</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../../src/mmtk/policy/marksweepspace/malloc_ms/metadata.rs.html#1-287">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CHUNK_MAP_LOCK.html" title="struct mmtk::policy::marksweepspace::malloc_ms::metadata::CHUNK_MAP_LOCK">CHUNK_MAP_LOCK</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Lock to synchronize the mapping of side metadata for a newly allocated chunk by malloc</div></li><li><div class="item-name"><a class="struct" href="struct.CHUNK_METADATA.html" title="struct mmtk::policy::marksweepspace::malloc_ms::metadata::CHUNK_METADATA">CHUNK_METADATA</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="struct" href="struct.MAX_METADATA_ADDRESS.html" title="struct mmtk::policy::marksweepspace::malloc_ms::metadata::MAX_METADATA_ADDRESS">MAX_METADATA_ADDRESS</a></div><div class="desc docblock-short">Maximum metadata address for the ACTIVE_CHUNK_METADATA_SPEC which is used to check bounds</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.ACTIVE_CHUNK_METADATA_SPEC.html" title="constant mmtk::policy::marksweepspace::malloc_ms::metadata::ACTIVE_CHUNK_METADATA_SPEC">ACTIVE_CHUNK_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Metadata spec for the active chunk byte</div></li><li><div class="item-name"><a class="constant" href="constant.ACTIVE_PAGE_METADATA_SPEC.html" title="constant mmtk::policy::marksweepspace::malloc_ms::metadata::ACTIVE_PAGE_METADATA_SPEC">ACTIVE_PAGE_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Metadata spec for the active page byte</div></li><li><div class="item-name"><a class="constant" href="constant.OFFSET_MALLOC_METADATA_SPEC.html" title="constant mmtk::policy::marksweepspace::malloc_ms::metadata::OFFSET_MALLOC_METADATA_SPEC">OFFSET_MALLOC_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.compare_exchange_set_page_mark.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::compare_exchange_set_page_mark">compare_exchange_set_page_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Set the page mark from 0 to 1. Return true if we set it successfully in this call.</div></li><li><div class="item-name"><a class="fn" href="fn.has_object_alloced_by_malloc.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::has_object_alloced_by_malloc">has_object_alloced_by_malloc</a></div><div class="desc docblock-short">Check if there is an object allocated by malloc at the address.</div></li><li><div class="item-name"><a class="fn" href="fn.is_alloced_by_malloc.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_alloced_by_malloc">is_alloced_by_malloc</a></div><div class="desc docblock-short">Check if a given object was allocated by malloc</div></li><li><div class="item-name"><a class="fn" href="fn.is_chunk_mapped.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_mapped">is_chunk_mapped</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.is_chunk_marked.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_marked">is_chunk_marked</a></div></li><li><div class="item-name"><a class="fn" href="fn.is_chunk_marked_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_marked_unsafe">is_chunk_marked_unsafe</a><sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.is_marked.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_marked">is_marked</a></div></li><li><div class="item-name"><a class="fn" href="fn.is_marked_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_marked_unsafe">is_marked_unsafe</a><sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.is_meta_space_mapped.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_meta_space_mapped">is_meta_space_mapped</a></div><div class="desc docblock-short">Check if metadata is mapped for a range [addr, addr + size). Metadata is mapped per chunk,
we will go through all the chunks for [address, address + size), and check if they are mapped.
If any of the chunks is not mapped, return false. Otherwise return true.</div></li><li><div class="item-name"><a class="fn" href="fn.is_meta_space_mapped_for_address.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_meta_space_mapped_for_address">is_meta_space_mapped_for_address</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Check if metadata is mapped for a given address. We check if the active chunk metadata is mapped,
and if the active chunk bit is marked as well. If the chunk is mapped and marked, we consider the
metadata for the chunk is properly mapped.</div></li><li><div class="item-name"><a class="fn" href="fn.is_offset_malloc.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_offset_malloc">is_offset_malloc</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Is this allocation an offset malloc? The argument address should be the allocation address (object start)</div></li><li><div class="item-name"><a class="fn" href="fn.is_page_marked.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_page_marked">is_page_marked</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.is_page_marked_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::is_page_marked_unsafe">is_page_marked_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.load128.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::load128">load128</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div><div class="desc docblock-short">Load u128 bits of side metadata</div></li><li><div class="item-name"><a class="fn" href="fn.map_active_chunk_metadata.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::map_active_chunk_metadata">map_active_chunk_metadata</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Eagerly map the active chunk metadata surrounding <code>chunk_start</code></div></li><li><div class="item-name"><a class="fn" href="fn.map_meta_space.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::map_meta_space">map_meta_space</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">We map the active chunk metadata (if not previously mapped), as well as the VO bit metadata
and active page metadata here. Note that if [addr, addr + size) crosses multiple chunks, we
will map for each chunk.</div></li><li><div class="item-name"><a class="fn" href="fn.set_chunk_mark.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::set_chunk_mark">set_chunk_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.set_mark_bit.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::set_mark_bit">set_mark_bit</a></div></li><li><div class="item-name"><a class="fn" href="fn.set_offset_malloc_bit.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::set_offset_malloc_bit">set_offset_malloc_bit</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Set the offset bit for the allocation. The argument address should be the allocation address (object start)</div></li><li><div class="item-name"><a class="fn" href="fn.set_page_mark.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::set_page_mark">set_page_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.set_vo_bit.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::set_vo_bit">set_vo_bit</a></div></li><li><div class="item-name"><a class="fn" href="fn.unset_chunk_mark_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_chunk_mark_unsafe">unset_chunk_mark_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.unset_mark_bit.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_mark_bit">unset_mark_bit</a><sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.unset_offset_malloc_bit_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_offset_malloc_bit_unsafe">unset_offset_malloc_bit_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div><div class="desc docblock-short">Unset the offset bit for the allocation. The argument address should be the allocation address (object start)</div></li><li><div class="item-name"><a class="fn" href="fn.unset_page_mark_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_page_mark_unsafe">unset_page_mark_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.unset_vo_bit.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_vo_bit">unset_vo_bit</a></div></li><li><div class="item-name"><a class="fn" href="fn.unset_vo_bit_unsafe.html" title="fn mmtk::policy::marksweepspace::malloc_ms::metadata::unset_vo_bit_unsafe">unset_vo_bit_unsafe</a><sup title="unsafe function">âš </sup></div></li></ul></section></div></main></body></html>