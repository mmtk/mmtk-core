<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata of some dead objects during GC.  Currently, only ImmixSpace is affected."><title>mmtk::util::metadata::vo_bit::helper - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="mmtk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0 (ded5c06cf 2025-12-08)" data-channel="1.92.0" data-search-js="search-d69d8955.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module helper</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../mmtk/index.html">mmtk</a><span class="version">0.32.0-105661429473dc141f940e981c04dc86e995daaa</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module helper</a></h2><h3><a href="#enums">Module Items</a></h3><ul class="block"><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In mmtk::<wbr>util::<wbr>metadata::<wbr>vo_<wbr>bit</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">util</a>::<wbr><a href="../../index.html">metadata</a>::<wbr><a href="../index.html">vo_bit</a></div><h1>Module <span>helper</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../../src/mmtk/util/metadata/vo_bit/helper.rs.html#1-202">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata
of some dead objects during GC.  Currently, only ImmixSpace is affected.</p>
<div><table><thead><tr><th>Policy</th><th>When are VO bits of dead objects cleared</th></tr></thead><tbody>
<tr><td>MarkSweepSpace</td><td>when sweeping cells of dead objects</td></tr>
<tr><td>MarkCompactSpace</td><td>when compacting</td></tr>
<tr><td>CopySpace</td><td>when releasing the space</td></tr>
</tbody></table>
</div>
<p>The policies listed above trivially clear the VO bits for dead objects (individually or in
bulk), and make the VO bits available during tracing.</p>
<p>For ImmixSpace, if a line contains both live and dead objects, live objects will be traced,
but dead objects will not be visited.  Therefore we cannot clear the VO bits of individual
dead objects.  We cannot clear all VO bits for the line in bulk because it contains live
objects.  This module updates the VO bits for such regions (e.g. Immix lines, or Immix blocks
if Immix is configured to be block-only).</p>
<p>We implement several strategies depending on whether mmtk-core or the VM binding also requires
the VO bits to also be available during tracing.</p>
<p>The handling is very sensitive to <code>VOBitUpdateStrategy</code>, and may be a bit verbose.
We abstract VO-bit-related code out of the main GC algorithms (such as Immix) to make it more
readable.</p>
</div></details><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.VOBitUpdateStrategy.html" title="enum mmtk::util::metadata::vo_bit::helper::VOBitUpdateStrategy">VOBit<wbr>Update<wbr>Strategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>The strategy to update the valid object (VO) bits.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.need_to_clear_vo_bits_before_tracing.html" title="fn mmtk::util::metadata::vo_bit::helper::need_to_clear_vo_bits_before_tracing">need_<wbr>to_<wbr>clear_<wbr>vo_<wbr>bits_<wbr>before_<wbr>tracing</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.on_object_forwarded.html" title="fn mmtk::util::metadata::vo_bit::helper::on_object_forwarded">on_<wbr>object_<wbr>forwarded</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.on_object_marked.html" title="fn mmtk::util::metadata::vo_bit::helper::on_object_marked">on_<wbr>object_<wbr>marked</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.on_region_swept.html" title="fn mmtk::util::metadata::vo_bit::helper::on_region_swept">on_<wbr>region_<wbr>swept</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.on_trace_object.html" title="fn mmtk::util::metadata::vo_bit::helper::on_trace_object">on_<wbr>trace_<wbr>object</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.strategy.html" title="fn mmtk::util::metadata::vo_bit::helper::strategy">strategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Select a strategy for the VM.  It is a <code>const</code> function so it always returns the same strategy
for a given VM.</dd><dt><a class="fn" href="fn.validate_config.html" title="fn mmtk::util::metadata::vo_bit::helper::validate_config">validate_<wbr>config</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl></section></div></main></body></html>